function Trained(t,e,n,a,r){this.name=t,this.maxHp=e,this.currentHp=e,this.maximumRoll=n,this.minimumRoll=a,this.picture=r}function Pokemon(t,e,n,a,r){this.name=t,this.maxHp=e,this.currentHp=e,this.maximumRoll=n,this.minimumRoll=a,this.picture=r}var trainedBlastoise=new Trained("Blastoise",100,50,10,"images/characters-back/blastoise.png"),trainedCharizard=new Trained("Charizard",100,50,20,"images/characters-back/charizard.png"),trainedPikachu=new Trained("Pikachu",100,40,30,"images/characters-back/pikachu.png"),trainedVenusaur=new Trained("Venusaur",120,40,10,"images/characters-back/venusaur.png"),blastoise=new Pokemon("Blastoise",100,50,10,"images/characters-front/blastoise.png"),pikachu=new Pokemon("Pikachu",100,40,30,"images/characters-front/pikachu.png"),charizard=new Pokemon("Charizard",100,50,20,"images/characters-front/charizard.png"),alakazam=new Pokemon("Alakazam",100,65,10,"images/characters-front/alakazam.png"),poliwhirl=new Pokemon("Poliwhirl",100,40,35,"images/characters-front/poliwhirl.png"),mewtwo=new Pokemon("Mewtwo",100,80,25,"images/characters-front/Mewtwo.png"),trainedArray=[trainedBlastoise,trainedPikachu,trainedCharizard,trainedVenusaur],pokemonArray=_.shuffle([blastoise,pikachu,charizard,alakazam,poliwhirl]),attack=function(t,e){return Math.floor(Math.random()*(t-e+1))+e},choosePokemon=function(){var t=Math.floor(Math.random()*pokemonArray.length);return pokemonArray[t]},currentPlayer={},currentEnemy={},setTrainer=function(t){currentPlayer=t,$(".js-trainer-name").text(t.name),$(".js-trainer-current-hp").text(t.currentHp),$(".js-trainer-hp").text(t.maxHp),$(".js-trainer-image").attr("src",t.picture).animate({left:"60px",display:"block"},1e3),$(".js-trainer-bar").css("width",t.currentHp/t.maxHp*100+"%")},setEnemy=function(t){currentEnemy=t,$(".js-enemy-name").text(t.name),$(".js-enemy-current-hp").text(t.currentHp),$(".js-enemy-hp").text(t.maxHp),$(".js-enemy-image").attr("src",t.picture).animate({right:"60px",display:"block"},1e3),$(".js-enemy-bar").css("width",t.currentHp/t.maxHp*100+"%"),$(".combat-text").text("A wild "+t.name+" appears.")};$(document).ready(function(){$(".modal-pokemon").on("click",function(){$(".start-modal").addClass("not-active");var t=_.where(trainedArray,{name:$(this).text()});currentPlayer=t[0],setTrainer(currentPlayer),setEnemy(pokemonArray[0]),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3),document.querySelector(".background-music").src="audio/107-battle-vs-wild-pokemon-.mp3"})}),Trained.prototype.potion=function(t){var e=this;$(".combat-text").text("You used a potion on "+e.name),setTimeout(function(){var n=t.currentHp+40;n>t.maxHp&&(n=t.maxHp),e.currentHp=n,$(".js-trainer-current-hp").text(n),$(".js-trainer-bar").css("width",t.currentHp/t.maxHp*100+"%"),$(".combat-text").text(e.name+" gained 40 HP!"),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3)},2e3)},Trained.prototype.attack=function(t){var e=this,n=t.currentHp,a=attack(this.maximumRoll,this.minimumRoll);$(".combat-text").text(this.name+" attacks the wild "+t.name);var r=roll100();6>r?setTimeout(function(){$(".combat-text").text(e.name+" missed!"),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3)},2e3):r>95?setTimeout(function(){a=2*a,n-=a,0>n&&(n=0),t.currentHp=n,$(".js-enemy-current-hp").text(n),$(".js-enemy-bar").css("width",t.currentHp/t.maxHp*100+"%"),$(".combat-text").text(e.name+" did "+a+" damage to "+t.name+". A critical hit!"),t.currentHp<=0?setTimeout(function(){$(".combat-text").text("The wild "+t.name+" has fainted."),document.querySelector(".background-music").src="audio/108-victory-vs-wild-pokemon-.mp3",_.any(pokemonArray,function(t){return t.currentHp>0})?setTimeout(function(){currentEnemy=_.find(pokemonArray,function(t){return t.currentHp>0}),setEnemy(currentEnemy),$(".combat-text").text("A wild "+currentEnemy.name+" has appeared."),document.querySelector(".background-music").src="audio/107-battle-vs-wild-pokemon-.mp3",setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},12e3):_.any(pokemonArray,function(t){return t.currentHp>0})||0!==mewtwo.currentHp?setTimeout(function(){$(".combat-text").text("A mysterious figure appears..."),setTimeout(function(){currentEnemy=mewtwo,setEnemy(mewtwo),$(".combat-text").text("Mewtwo steps out of the shadows."),document.querySelector(".background-music").src="audio/128-battle-vs-gym-leader-.mp3",setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},2e3)},2e3):setTimeout(function(){document.querySelector(".background-music").src="audio/145-ending.mp3",$(".combat-text").text("Congratulations! You have won the game!")},1e4)},2e3):setTimeout(function(){t.attack(e)},2e3)},2e3):setTimeout(function(){n-=a,0>n&&(n=0),t.currentHp=n,$(".js-enemy-current-hp").text(n),$(".js-enemy-bar").css("width",t.currentHp/t.maxHp*100+"%"),$(".combat-text").text(e.name+" did "+a+" damage to "+t.name),t.currentHp<=0?setTimeout(function(){$(".combat-text").text("The wild "+t.name+" has fainted."),document.querySelector(".background-music").src="audio/108-victory-vs-wild-pokemon-.mp3",_.any(pokemonArray,function(t){return t.currentHp>0})?setTimeout(function(){currentEnemy=_.find(pokemonArray,function(t){return t.currentHp>0}),setEnemy(currentEnemy),$(".combat-text").text("A wild "+currentEnemy.name+" has appeared."),document.querySelector(".background-music").src="audio/107-battle-vs-wild-pokemon-.mp3",setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},12e3):_.any(pokemonArray,function(t){return t.currentHp>0})||0!==mewtwo.currentHp?setTimeout(function(){$(".combat-text").text("A mysterious figure appears..."),setTimeout(function(){currentEnemy=mewtwo,setEnemy(mewtwo),$(".combat-text").text("Mewtwo steps out of the shadows."),document.querySelector(".background-music").src="audio/128-battle-vs-gym-leader-.mp3",setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},2e3)},2e3):setTimeout(function(){$(".combat-text").text("Congratulations! You have won the game!")},2e3)},2e3):setTimeout(function(){t.attack(e)},2e3)},2e3)},$(".js-attack").on("click",function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active"),currentPlayer.attack(currentEnemy)}),$(".js-potion").on("click",function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active"),currentPlayer.potion(currentPlayer)}),$(".js-switch").on("click",function(){$(".js-player-options, .js-switch-menu").toggleClass("not-active"),populateSwitchMenu()}),$(".js-switch-pokemon.charizard").on("click",function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active"),0===_.where(trainedArray,{name:"Charizard"})[0].currentHp?($(".combat-text").text("You cannot use this pokemon"),setTimeout(function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active")},2e3)):($(".combat-text").text("Good job "+currentPlayer.name+"! Come back."),setTimeout(function(){$(".combat-text").text("Go... Charizard!");var t=_.where(trainedArray,{name:"Charizard"});currentPlayer=t[0],setTrainer(currentPlayer),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3)},2e3))}),$(".js-switch-pokemon.blastoise").on("click",function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active"),0===_.where(trainedArray,{name:"Blastoise"})[0].currentHp?($(".combat-text").text("You cannot use this pokemon"),setTimeout(function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active")},2e3)):($(".combat-text").text("Good job "+currentPlayer.name+"! Come back."),setTimeout(function(){$(".combat-text").text("Go... Blastoise!");var t=_.where(trainedArray,{name:"Blastoise"});currentPlayer=t[0],setTrainer(currentPlayer),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3)},2e3))}),$(".js-switch-pokemon.venusaur").on("click",function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active"),0===_.where(trainedArray,{name:"Venusaur"})[0].currentHp?($(".combat-text").text("You cannot use this pokemon"),setTimeout(function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active")},2e3)):($(".combat-text").text("Good job "+currentPlayer.name+"! Come back."),setTimeout(function(){$(".combat-text").text("Go... Venusaur!");var t=_.where(trainedArray,{name:"Venusaur"});currentPlayer=t[0],setTrainer(currentPlayer),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3)},2e3))}),$(".js-switch-pokemon.pikachu").on("click",function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active"),0===_.where(trainedArray,{name:"Pikachu"})[0].currentHp?($(".combat-text").text("You cannot use this pokemon"),setTimeout(function(){$(".js-combat-text-container, .js-switch-menu").toggleClass("not-active")},2e3)):($(".combat-text").text("Good job "+currentPlayer.name+"! Come back."),setTimeout(function(){$(".combat-text").text("Go... Pikachu!");var t=_.where(trainedArray,{name:"Pikachu"});currentPlayer=t[0],setTrainer(currentPlayer),setTimeout(function(){currentEnemy.attack(currentPlayer)},2e3)},2e3))}),$(".js-back").on("click",function(){$(".js-player-options, .js-switch-menu").toggleClass("not-active")}),Pokemon.prototype.attack=function(t){var e=this,n=t.currentHp,a=attack(this.maximumRoll,this.minimumRoll);$(".combat-text").text("The wild "+e.name+" attacks "+t.name);var r=roll100();11>r?setTimeout(function(){$(".combat-text").text("The wild "+e.name+" missed!"),setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},2e3):r>98?setTimeout(function(){a=2*a,n-=a,0>n&&(n=0),t.currentHp=n,$(".js-trainer-current-hp").text(n),$(".js-trainer-bar").css("width",t.currentHp/t.maxHp*100+"%"),$(".combat-text").text("The wild "+e.name+" did "+a+" damage to "+t.name+". A critical hit!"),t.currentHp<=0?setTimeout(function(){$(".combat-text").text(t.name+" has fainted."),setTimeout(function(){_.every(trainedArray,function(t){return 0===t.currentHp})?($(".combat-text").text("Game Over"),setTimeout(function(){location.reload()},5e3)):($(".js-switch-menu, .js-combat-text-container").toggleClass("not-active"),populateSwitchMenu())},2e3)},2e3):setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},2e3):setTimeout(function(){n-=a,0>n&&(n=0),t.currentHp=n,$(".js-trainer-current-hp").text(n),$(".js-trainer-bar").css("width",t.currentHp/t.maxHp*100+"%"),$(".combat-text").text("The wild "+e.name+" did "+a+" damage to "+t.name),t.currentHp<=0?setTimeout(function(){$(".combat-text").text(t.name+" has fainted"),setTimeout(function(){_.every(trainedArray,function(t){return 0===t.currentHp})?(document.querySelector(".background-music").src="audio/117-mt.-moon-cave.mp3",$(".combat-text").text("Game Over"),setTimeout(function(){location.reload()},1e4)):($(".js-switch-menu, .js-combat-text-container").toggleClass("not-active"),populateSwitchMenu())},2e3)},2e3):setTimeout(function(){$(".js-player-options, .js-combat-text-container").toggleClass("not-active")},2e3)},2e3)};var roll100=function(){var t=Math.ceil(100*Math.random());return t},populateSwitchMenu=function(){_.each(trainedArray,function(t,e){var n="."+t.name.toLowerCase()+"-current-hp",a="."+t.name.toLowerCase()+"-max-hp";$(n).text(t.currentHp),$(a).text(t.maxHp)})};
